========================================
(デモ 1) 画像処理 (OpenRTM-aist，OpenCV)
========================================

Introduction
============

関連するチュートリアル
----------------------
- http://www.openrtm.org/openrtm/ja/node/4625
  - ネット接続不可の場合は ./doc/tutorial_openrtm_opencv_cmake_imgprocessing.pdf

このページで体験すること
------------------------
- カメラで認識する動画像を反転 (OpenRTM-aist，OpenCV による)
- RT System Editor の初歩的な利用

動作環境
--------
- Windows 7／ 8
- Java Runtime Environment (JRE) 7 (3_)

実行方法
========
以下，特に指定ない限り，配布 USB のホームディレクトリに居ることを前提とします．

1) ./demo/rtm-naming.bat を実行

2) ./demo/OpencvRtmDemo/0 StartDemo.bat を実行

3) ./demo/RTSE.bat を実行．RT System Editor が下図のように起動する．

.. image:: media/rtse_nocomponents.png

4) 左側のペインで 127.0.0.1 を選択し直上の右矢印をクリックすると，起動中の RT Component が同ペイン上に表示される．ここでは `DirectShowCamComp`，`FlipComp`，`CameraViewerComp` となるはず．

5) File --> Open New System Editor を選ぶと，`System Diagram` が真ん中のペインに開かれる．左側のペインから各 RTC を System Diagram にドラッグすると下図のように表示される．

.. image:: media/rtse_opencvflip_launched.png

6) 同ペイン上で各 RTC を接続．上に挙げた三つの RTC を左から接続する．

7) 同ペイン上で直上左にある "ALL" というアイコンをクリック，すべての RTC を activate (参考リンク 1_) 

.. image:: media/1.1_rtc_activated.png

8) `CaptureImage` というウィンドウにカメラ画像が表示されれば入出力・接続が成功．同時に `DirectShowCamComp` のコマンドプロンプトにも `frame rate` が定期的に追加表示される．

.. image:: media/1.1_framerate.png

9) `RTSystemEditor` 上で flip_mode の値を 1 --> 0 --> -1 と変える (Apply を忘れずに) とカメラ画像も変わることを確認できる．`flip_mode` の値と対応する挙動は次のようになる (画像引用元 2_)

.. image:: http://www.openrtm.org/openrtm/sites/default/files/1337/cvFlip_and_FlipRTC.png

.. _1: http://www.openrtm.org/openrtm/ja/node/4625#toc26 
.. _2: http://www.openrtm.org/openrtm/sites/default/files/1337/cvFlip_and_FlipRTC.png
.. _3: http://www.oracle.com/technetwork/java/javase/downloads/java-se-jre-7-download-432155.html
